
                   Regatta Equipment Scheduling
                   ----------------------------
                   Version 0.02 -- Linas Vepstas


Pre-requisites
--------------
To use this code, must have clingo, from the potassco project, installed.
In principle, any other answer-set programming system should work,
although only clingo has been tested.

See:  http://potassco.sourceforge.net/

Testing the Example
-------------------
Validate your clingo installation by running the following at the
command line:

   clingo example.asp

The output should resemble the following:
   Answer: 1
   reserve(201,matt,black)
   reserve(206,juniors,green) reserve(206,juniors,orange)
   reserve(201,advanced,revere)
   boat_reservation_failure(202,intermediate)
   boat_reservation_failure(203,intermediate) 
   Optimization: 8 0 0 

   Answer: 2
   reserve(201,matt,black)
   reserve(206,juniors,revere) reserve(206,juniors,orange)
   reserve(201,advanced,orange)
   reserve(202,intermediate,green)
   boat_reservation_failure(203,intermediate)
   hotseat(206,orange) hurry_back(201,advanced,orange) 
   Optimization: 7 1 1 
   OPTIMUM FOUND



The above states that two different reservations were found, labelled
"Answer: 1" and "Answer: 2".  The first answer requires a hotseat of
the orange quad; the second requires no hot-seating.

In the first answer, the juniors get two quads for race 206: the
heavyweight orange and the heavyweight revere.  Since the advanced
crew got orange for race 201, this will have to be hot-seated.  Matt
gets the black quad for race 201.  And so on.  The "hurry_back"
note is printed for convenience: it reminds the crew in race 201
that they need to hurry back to the hotseat dock.

The line "Optimization: 1" states that the answer above required one
hot-seat.  One can do better, since there are plenty of quads to
go around.  The second answer requires no hot-seating, and indeed,
that's what it claims when it says: "Optimization: 0"

In the above, only one optimal boat assignment was printed. In fact,
there may be more.  To print all of them:

   clingo --opt-all example.asp

For the example given, there are in fact 6 different reservations that
don't require hot seating.  Thus, if one wishes, one can now get pickier
with boat assignments: one may edit the example, and request specific
boats for specific crews, or disallow certain crews from using certain
boats, etc.  Doing so may result in more and more hotseats being required,
or there may be no answers at all.  In the last case, the program will
print 

   UNSATISFIABLE

All that one can do at this point is scratch equipment requests, until
a usable reservation is found.


Running
-------
 * Make a copy of the 'trc_boats.asp' file, giving it some other name,
   say, for example, 'club_boats.asp'.  Edit, as desired, describing
   the various boats owned by the club.  New boat classes and boat
   types may be added (or removed) as desired; the 'trc_boats.asp' is
   merely a more refined example of what one can do.

 * Make a copy of the 'texas-champs-2012.asp' file, calling it, say,
   'head2012.asp'.  Edit this file, and describe the crews and the
   equipment requests.

 * Run the software.  To list one possible set of boat assignments
   (if any):

       clingo  head2102.asp

   If its not possible to satisfy all the requests, the program will
   print UNSATISFIABLE.

   To list multiple different boat assignments (4, in this example,
   assuming that there are any at all), enter this:

       clingo 4 head2012.asp

 * Typically, ther may be thousands of different boat assignments.  In
   this case, it is probably worth the effort to tighten up boat
   requests, to give certain crews priority for certain boats; this way,
   one can work towards getting everybody what they want.

   If the program keeps printing "UNSATISFIABLE", then either: you need
   to get more boats, e.g. borrow one, or deny one or more of the
   requests, hopefully freeing things up.  In a very extreme case, try
   reducing the time between races: but this is dangerous, as it may
   not give the next crew enough time to warm up.  If you reduce the
   center, then raise the hotseat_warn time, so that crews will still
   get adequate warnings of needing to hurry back to the dock, etc.
   
   If everything looks OK, and you're still getting "UNSATISFIABLE",
   then there's a bug somehwere in your boat lists and/or equipment
   requests.  Review.


That's all for now, folks!

